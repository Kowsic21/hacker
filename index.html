<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Real-time Text Input — Live Preview</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --muted:#94a3b8; --accent:#7c3aed; --glass: rgba(255,255,255,0.03); }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071126 0%, #07122b 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:28px}

    .wrap{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:12px}
    h1{font-size:18px;margin:0}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    .card{background:var(--card);border-radius:10px;padding:12px;min-height:180px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.02)}

    label{display:block;font-size:12px;margin-bottom:8px;color:var(--muted)}

    textarea,input[type=text]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit;resize:vertical;min-height:120px;font-size:15px}

    .controls{display:flex;gap:8px;align-items:center;margin-top:8px}
    .chip{font-size:13px;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted)}

    .preview{white-space:pre-wrap;word-wrap:break-word;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:12px;border-radius:8px;min-height:120px}

    .small{font-size:12px;color:var(--muted)}

    footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}

    @media (max-width:820px){.grid{grid-template-columns:1fr;}}

    /* accessibility focus */
    textarea:focus{outline:3px solid rgba(124,58,237,0.14);outline-offset:2px}

    /* optional demo styling for rendered markdown-like bold/italic */
    .preview b{font-weight:700}
    .preview i{font-style:italic}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div>
        <h1>Real-time Text Input — Live Preview</h1>
        <p class="lead">Type on the left — your text updates instantly on the right. Works on desktop & mobile.</p>
      </div>
      <div class="small">HTML • CSS • JS (single file)</div>
    </header>

    <div class="grid">
      <section class="card" aria-labelledby="input-label">
        <label id="input-label">Your text</label>
        <textarea id="source" placeholder="Start typing... (supports line breaks)"></textarea>
        <div class="controls" aria-hidden="false">
          <div class="chip" id="chars">0 chars</div>
          <div class="chip" id="words">0 words</div>
          <div style="flex:1"></div>
          <button id="clearBtn" type="button" class="chip" aria-label="Clear text">Clear</button>
        </div>
      </section>

      <section class="card" aria-labelledby="preview-label">
        <label id="preview-label">Live preview</label>
        <div id="preview" class="preview" aria-live="polite"></div>
        <div style="height:8px"></div>
        <div class="small">Tip: Paste text or type; HTML will be escaped to prevent injection.</div>
      </section>
    </div>

    <footer>
      <div class="small">Made for demo — accessible & responsive.</div>
      <div class="small">Want Markdown rendering or syntax highlight? Ask and I'll add it.</div>
    </footer>
  </div>

  <script>
    // Utility: escape HTML so preview is safe
    function escapeHtml(str){
      return str.replace(/[&<>\"]/g, function(tag){
        const chars = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;' };
        return chars[tag] || tag;
      });
    }

    const src = document.getElementById('source');
    const prev = document.getElementById('preview');
    const chars = document.getElementById('chars');
    const words = document.getElementById('words');
    const clearBtn = document.getElementById('clearBtn');

    function update(){
      const value = src.value;
      // update counts
      chars.textContent = value.length + (value.length === 1 ? ' char' : ' chars');
      // simple word count (split on whitespace)
      const w = value.trim().length ? value.trim().split(/\s+/).length : 0;
      words.textContent = w + (w === 1 ? ' word' : ' words');

      // simple formatting: show **bold** and *italic* like markdown (not full md parser)
      // 1) escape HTML
      let safe = escapeHtml(value);
      // 2) simple replacements (bold then italic)
      safe = safe.replace(/\*\*(.+?)\*\*/g, '<b>$1</b>');
      safe = safe.replace(/\*(.+?)\*/g, '<i>$1</i>');

      prev.innerHTML = safe || '<span class="small" style="color:var(--muted)">Nothing yet — start typing.</span>';
    }

    // update on input (real-time)
    src.addEventListener('input', update);

    // keyboard-friendly: Ctrl/Cmd+K clears
    src.addEventListener('keydown', function(e){
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k'){
        e.preventDefault();
        src.value = '';
        update();
      }
    });

    clearBtn.addEventListener('click', function(){ src.value = ''; update(); src.focus(); });

    // initialize with sample text
    src.value = 'Hello — type here.\n\nTry **bold** and *italic* to see simple formatting.';
    update();
  </script>
</body>
</html>
